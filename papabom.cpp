#include "papabom.h"
#include "ui_papabom.h"

Papabom::Papabom(QWidget *parent)
    : QMainWindow(parent)
    , ui(new Ui::Papabom)
{
    ui->setupUi(this);

    scene = new QGraphicsScene(); //Creo escena
    QPen pen(Qt::gray, 1, Qt::SolidLine, Qt::SquareCap, Qt::RoundJoin); // Creo contorno para bloques fijos
    QImage im(Ruta_imagen); //Leo imagen en la direccion ruta_imagen
     QBrush brush(im); // creo brocha con textura gris

     ////// Mapa de escenario ///////
     char mapabloques[13][23]={
         {'1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1'},
         {'1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1'},
         {'1','0','1','0','1','0','1','0','1','0','1','0','1','0','1','0','1','0','1','0','1','0','1'},
         {'1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1'},
         {'1','0','1','0','1','0','1','0','1','0','1','0','1','0','1','0','1','0','1','0','1','0','1'},
         {'1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1'},
         {'1','0','1','0','1','0','1','0','1','0','1','0','1','0','1','0','1','0','1','0','1','0','1'},
         {'1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1'},
         {'1','0','1','0','1','0','1','0','1','0','1','0','1','0','1','0','1','0','1','0','1','0','1'},
         {'1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1'},
         {'1','0','1','0','1','0','1','0','1','0','1','0','1','0','1','0','1','0','1','0','1','0','1'},
         {'1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1'},
         {'1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1','1'}
     };

     //algoritmo para creacion de bloques en la plataforma
     int ancho=44, alto=44; // dimensiones bloques
     int posy=0;
     for (int i=0; i<13 ; i++ ) {
          int posx=0;

          for(int j=0; j<23;j++){
          if(mapabloques[i][j]==49){
              bloques.push_back(scene->addRect(posx,posy,ancho,alto,pen,brush));
              posx+=44;
          }
          else posx+=44;
          }
           posy+=44;
      }

      ui->graphicsView->setScene(scene);
      ui->graphicsView->show();
}

Papabom::~Papabom()
{
    delete ui;
}

